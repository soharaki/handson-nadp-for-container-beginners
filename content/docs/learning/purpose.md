---
title: 仮想化技術とその目的
weight: 2
---

# 仮想化技術とその目的

## 仮想化技術とは?

仮想化技術の歴史は、古くは1967年にコンセプト機として開発されたIBMのメインフレーム System/360 Model 67に遡ります。

当時のコンピューターは非常に高価だったので、複数のユーザーで共用する方法が色々考案されていました。
そのアイディアの一つとして実現したのがタイムシェアリングです。

> タイムシェアリングとは、1台のコンピューターのCPU処理時間を極めて短い時間単位で分割し、複数のユーザーに順次割り当て、見かけ上複数のユーザーが同時にコンピューターを利用できるようにすることでコンピューターの共用を実現しようとした。1961年、IBM 709でタイムシェアリングが実装され、さらに使いやすいシステムの実現を目指し、MITでMULTICS （Multiplexed Information and Computing Service）プロジェクトがスタートとした。MULTICSは必ずしも成功とは言えなかったが、この考えは受け継がれ、後のUNIXへとつながる。

> さて、分割したCPUの処理時間は、ユーザーにとって独立した個別のCPUと見做される。ならば、これにユーザー個別のオペレーティング・システムを動かせるように発展させることで、今でいう仮想化が生まれた。1967年、IBM　System/360モデル67で実装されたCP-67/CMSが商用ベースでは、初めてのモノとされている。また、その時始めて、Virtual Machine（VM）という言葉が使われた。

後続のメインフレームであるSystem/370は新たにVirtual storage(仮想記憶)機能が加わり、OSの名前であるVM/370と共に本格的な普及に繋がりました。

こうした経緯により誕生した仮想化技術は様々な進化を経て、現在のコンテナ、Kubernetesの構成技術に至ります。

{{< figure src="/images/diagram.png" class="center" >}}

上記の図で青く塗ったのが、Kubernetesに繋がる系譜です。
こうして俯瞰してみると仮想化技術は常に二つのテーマがあったことが伺えます。

1. マシンリソースの分配
  - 複数のユーザー、プログラムで、マシンリソースをいかに効率よく使用するか(共用するか)
2. セキュリティの担保
  - 1の条件下で、いかにセキュリティを担保するか

仮想化技術の場合、必ずどちらかの課題を解決するために開発された背景があることを常に念頭に置いてください。
次の章より、個々の技術要素について説明します。

# 余談

このCP-67/CMSは次の二つの主要コンポーネントから構成されていました。

* CP(the Control Program)
  * 仮想マシン環境を提供するためのプログラム
  * タイムシェアリング機能において、従来のアプローチであったユーザー間におけるメモリやその他のリソースを明確に分離する方法 **ではなく** 、各ユーザーにシミュレートされたStandaloneなSystem/360のコンピューターを提供する仕組みでした。
* CMS(Cambridge Monitor System, Conversational Monitor System)
  * インタラクティブなタイムシェアリング用の軽量なシングルユーザーOS。従来の大規模なマルチタスクOSの複数のコピーではなく、CPの仮想マシンでCMSの多くのコピーを実行することで、ユーザー一人あたりのオーバーヘッドが少なくなりました。これにより、多数の同時ユーザーが単一のS/360を共有することが可能になりました。

当時としては非常に画期的なコンセプトでした。

# 参考文献

* https://en.wikipedia.org/wiki/CP/CMS
* https://blogs.itmedia.co.jp/itsolutionjuku/2014/06/post-9f0b.html
* https://cseweb.ucsd.edu/~voelker/cse221/papers/vm370.pdf
* http://www.vmworkshop.org/pres2017/50years.pdf
* https://hackmd.io/s/ryPfDLU77
* https://wiki.infra-workshop.tech/%E5%8B%89%E5%BC%B7%E4%BC%9A%E3%83%AD%E3%82%B0/2018/07/14/[%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%81%AE%E6%AD%B4%E5%8F%B2]Docker%E3%81%8C%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%BE%E3%81%A7%20%E7%AC%AC%E4%B8%89%E5%9B%9E%20%E3%80%9C%E9%9B%86%E5%90%88%E7%9F%A5%E3%82%92%E9%9B%86%E3%82%81%E3%81%A6%E6%AD%B4%E5%8F%B2%E3%82%92%E7%9F%A5%E3%82%8D%E3%81%86%E3%80%9C